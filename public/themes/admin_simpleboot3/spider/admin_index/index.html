<!DOCTYPE html><html><head>    <meta charset="UTF-8">    <!--引入样式文件-->    <!-- import CSS -->    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">    <!-- import Vue before Element -->    <script src="https://unpkg.com/vue/dist/vue.js"></script>    <!-- import JavaScript -->    <script src="https://unpkg.com/element-ui/lib/index.js"></script>    <!-- axios -->    <script src="https://unpkg.com/axios/dist/axios.min.js"></script></head><body><!-- 定义一个vue的管理区块，（MVVM中的View） --><div id="main">    <el-row :gutter="22">        <el-col :span="22" :offset="1">            <div class="grid-content bg-purple"></div>            <div id="table">                <template>                    <!--  文章表格  -->                    <el-table                            v-loading="loading"                            element-loading-text="拼命加载中"                            element-loading-spinner="el-icon-loading"                            element-loading-background="rgba(0, 0, 0, 0.8)"                            ref="multipleTable"                            :data="tableData"                            border                            fit                            style="width: 100%" @selection-change="handleSelectionChange">                        <el-table-column                                type="selection"                                width="55">                        </el-table-column>                        <el-table-column                                fixed                                prop="id"                                label="ID"                                width="75">                        </el-table-column>                        <el-table-column                                prop="title"                                label="标题"                                min-width="200">                        </el-table-column>                        <el-table-column prop="keywords" label="关键词" width="300">                            <!--<el-table-column prop="tag" label="标签" width="100" :filters="[{ text: '家', value: '家' }, { text: '公司', value: '公司' }]" :filter-method="filterTag" filter-placement="bottom-end">-->                            <template slot-scope="scope">                                <!--<el-tag :type="scope.row.tag === '家' ? 'primary' : 'success'" disable-transitions>{{scope.row.tag}}</el-tag>-->                                <!--<el-tag >{{scope.row.tag}}</el-tag>-->                                <el-tag                                        size="mini"                                        :key="keywords"                                        :disable-transitions="false"                                        v-for="keywords in scope.row.keywords"                                >                                    {{keywords}}                                </el-tag>                            </template>                        </el-table-column>                        <el-table-column                                prop="source"                                label="来源"                                width="120">                        </el-table-column>                        <el-table-column                                prop="date"                                label="发布日期"                                min-width="90">                        </el-table-column>                        <el-table-column                                prop="url"                                label="网站地址"                                width="300">                        </el-table-column>                        <el-table-column                                fixed="right"                                label="操作"                                width="210">                            <template slot-scope="scope">                                <!--<el-button @click="handleClick(scope.row)" type="text" size="small">查看</el-button>-->                                <!--<el-button @click="test(scope)" type="text" size="small">查看</el-button>-->                                <el-button @click="show(scope.row.url)" type="info" plain size="mini">查看源站</el-button>                                <el-button type="success" plain size="mini" @click="verifyAdd(scope.row.id)">数据转移                                </el-button>                            </template>                        </el-table-column>                    </el-table>                    <!-- 弹框 -->                    <!--<el-dialog title="数据转移" :visible.sync="dialogVisible" width="30%" :before-close="handleClose">-->                    <el-dialog title="数据转移" :visible.sync="dialogVisible" width="30%">                        <span>点击确定将文章数据转移到IDCKX文章库中</span>                        <span slot="footer" class="dialog-footer">                            <el-button @click="dialogVisible = false">取 消</el-button>                            <!--<el-button type="primary" @click="dialogVisible = false">确 定</el-button>-->                            <el-button type="primary" @click="transferArticle">确 定</el-button>                        </span>                    </el-dialog>                    <!-- 分页按钮 -->                    <div class="page">                        <!--<span class="demonstration">显示总数</span>-->                        <el-pagination                                @size-change="handleSizeChange"                                @current-change="handleCurrentChange"                                :current-page.sync="currentPage1"                                :page-size="10"                                layout=" total,prev, pager, next"                                :total="pageCount">                        </el-pagination>                    </div>                    <!--<div style="margin-top: 20px">-->                    <!--<el-button @click="toggleSelection([tableData[1], tableData[2]])">切换第二、第三行的选中状态</el-button>-->                    <!--<el-button @click="toggleSelection()">取消选择</el-button>-->                    <!--</div>-->                </template>            </div>        </el-col>    </el-row>    <!--<button @click="getPostData">点击得到数据</button>-->    <!--{{name}}--></div></body><script>    // 实例化vue对象（MVVM中的View Model）    new Vue({        // vm控制的区块为id为app的div，此div中的所有vue指令均可以被vm解析        el: '#main',        data: {            loading: true,            // 数据 （MVVM中的Model）            // name: "123",            // tableData: [{"date": "2016-05-02", "name": "\u738b\u5c0f\u864e", "address": "\u5730\u5740","keywords":['标签1','标签2']}],            tableData: [],            currentPage1: 1,            multipleSelection: [],            pageCount: '',            dialogVisible: false,        },        /**         * 渲染时自动执行方法         */        created: function () {            _this = this;            _this.pageCount = _this.getPostCount();            _this.getPostData(1, 10);            // console.log(tableData);            // _this.getPostCount();        },        methods: {            /**             *  获取文章数据方法             */            getPostData: function (page, length) {                // console.log(page);                this.loading=true;                //设置请求路径                var url = "/spider/admin_index/showList";                // 发送请求:将数据返回到一个回到函数中                _this = this;                // 并且响应成功以后会执行then方法中的回调函数                axios.post(url, {                    page: page,                    length: length                }).then(function (result) {                    // result是所有的返回回来的数据                    // 包括了响应报文行                    // 响应报文头                    // 响应报文体                    console.log(result.data);                    _this.tableData = result.data;                    _this.loading=false;                });            },            /**             * 获取文章总数量方法             */            getPostCount: function () {                //设置请求路径                var url = "/spider/admin_index/postCount";                // 发送请求:将数据返回到一个回到函数中                _this = this;                // 并且响应成功以后会执行then方法中的回调函数                axios.get(url).then(function (result) {                    // result是所有的返回回来的数据                    // 包括了响应报文行                    // 响应报文头                    // 响应报文体                    _this.pageCount = Number(result.data);                });            },            //弹框确认执行方法            verifyAdd(id) {                this.addPostId = id                console.log(this.addPostId);                return _this.dialogVisible = true;            },            //将文章数据转移到快讯文章库            transferArticle() {                console.log('转移数据');                console.log(this.addPostId);                //设置请求路径                var url = "/spider/admin_index/transferArticle";                // 发送请求:将数据返回到一个回到函数中                _this = this;                // 并且响应成功以后会执行then方法中的回调函数                axios.post(url, {                    id: this.addPostId                }).then(function (result) {                    console.log(result.data.state);                    switch (result.data.state) {                        case 0:                            _this.$notify({                                title: '添加失败',                                message: result.data.message,                                type: 'error'                            });                            break;                        case 1:                            _this.$notify({                                title: '数据转移成功',                                message: '请到文章管理中审核编辑发布',                                type: 'success'                            });                            break;                        default:                            _this.$notify({                                title: '错误',                                message: '未知错误',                                type: 'error'                            });                    }                }).catch(function (error) {                    _this.$notify({                        title: '错误',                        message: error,                        type: 'error'                    });                });                return _this.dialogVisible = false;            },            //===============分页操作===================            handleSizeChange(val) {                console.log(`每页 ${val} 条`);            },            handleCurrentChange(val) {                console.log(`当前页: ${val}`);                this.getPostData(val, 10);            },            toggleSelection(rows) {                if (rows) {                    rows.forEach(row => {                        this.$refs.multipleTable.toggleRowSelection(row);                    });                } else {                    this.$refs.multipleTable.clearSelection();                }            },            handleSelectionChange(val) {                this.multipleSelection = val;            },            //--------------关闭弹框后的操作-----------------------------            // handleClose(done) {            //            //     this.$confirm('确认关闭？')            //         .then(_ => {            //             done();            //         })            //         .catch(_ => {            //         });            // },            //--------------------标签---------------------------            // formatter(row, column) {            //     return row.address;            // },            // filterTag(value, row) {            //     return row.tag === value;            // },            // filterHandler(value, row, column) {            //     const property = column['property'];            //     return row[property] === value;            // },            /**             * 列表页打开原文链接方法             * @param url             */            show(url) {                //点击打开文章页面                window.open(url)            }        },    })</script></html>